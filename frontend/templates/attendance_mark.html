{% extends "base.html" %}
{% load static %}

{% block title %}Mark Attendance{% endblock %}

{% block content %}
<div class="card shadow-lg rounded border-gray-400">
    <div class="card-header d-flex justify-content-between align-items-center border-bottom-gray-400">
        <h3 class="mb-0 text-uppercase fw-bold flex-grow-1 text-center">Mark Attendance</h3>
        <a href="{% url 'frontend:employees_list' %}" class="btn btn-dark d-flex align-items-center gap-2 px-2 py-1">
            <i class="bi bi-arrow-left fs-5"></i>
        </a>
    </div>

    <div class="card-body p-3">
        <form class="ajax-form row g-3" 
              data-url="/api/attendance/" 
              data-redirect="{% url 'frontend:attendance_mark' %}" 
              data-error-message="Error submitting attendance." 
              novalidate>
            {% csrf_token %}

            <!-- Employee Dropdown -->
            <div class="col-md-5">
                <label for="employee" class="form-label">Employee</label>
                <select class="form-control" id="employee" name="employee" required data-choices data-placeholder="Select Employee">
                    {% for emp in employees %}
                    <option value="{{ emp.id }}">{{ emp.name }}</option>
                    {% endfor %}
                </select>
            </div>

            <!-- Date Picker -->
            <div class="col-md-4">
                <label for="date" class="form-label">Date</label>
                <input type="text" class="form-control flatpickr" id="date" name="date" placeholder="Select Date" required>
            </div>

            <!-- Status -->
            <div class="col-md-3">
                <label for="status" class="form-label">Status</label>
                <select class="form-control" id="status" name="status" required data-choices data-placeholder="Select Status">
                    <option value="Present">Present</option>
                    <option value="Absent">Absent</option>
                </select>
            </div>

            <div class="col-12 d-flex justify-content-end gap-2 mt-3">
                <a href="{% url 'frontend:employees_list' %}" class="btn btn-secondary">Cancel</a>
                <button type="submit" class="btn btn-dark">Save</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
